import{c as l}from"./chunk-KD2IQ32V.mjs";import{a as i}from"./chunk-MGQ373AO.mjs";import u from"axios";var m=4,h=3e4,a={current:null},r={current:null},p=i(async(e,s,n)=>{if(n){let t=Math.floor(Date.now()/1e3);return{hash:await n(),timestamp:t}}let{data:o}=await u.get(`${e}/${l}?from=${m}&size=1&fields=hash,timestamp${s?"&shard="+s:""}`),[c]=o;return c});async function B({apiAddress:e,noCache:s,blockHashShard:n,getBlockHash:o}){if(e==null)throw new Error("missing api url");let c=Date.now();if(a.current!=null&&c<a.current.timestamp*1e3+h&&!s)return a.current;if(r.current!=null)return await r.current;r.current=p(e,n,o);try{let t=await r.current;if(t==null)throw r.current=null,new Error("could not get block hash");return a.current={hash:t.hash,timestamp:t.timestamp},r.current=null,t}catch{return r.current=null,null}}export{B as a};
//# sourceMappingURL=chunk-3S57OP4Z.mjs.map
