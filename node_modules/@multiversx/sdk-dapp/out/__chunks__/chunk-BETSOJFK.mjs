import{h}from"./chunk-OEPTRJEB.mjs";import{a as D}from"./chunk-HH5SA7BX.mjs";import{a as f,b as m}from"./chunk-WRLZ5ICK.mjs";import{a as g}from"./chunk-I3MK6KZJ.mjs";import{Address as V}from"@multiversx/sdk-core";import y from"bignumber.js";var x=e=>{let r=[];return e&&!f(e)&&r.push(`Invalid Hex characters on argument @${e}`),e&&!m(e)&&r.push(`Odd number of Hex characters on argument @${e}`),r},a=(e,r,n)=>{switch(r){case"text":try{return Buffer.from(e,"hex").toString("utf8")}catch{return e}case"decimal":return e!==""?new y(e,16).toString(10):"";case"smart":try{let t=V.newFromHex(e).toString();if(g(t))return t}catch{}try{let t=Buffer.from(e,"hex").toString("utf8");if(D(t))return t;{if(n&&[...n.esdts,...n.nfts].some(s=>t.includes(s)))return t;let i=new y(e,16);return i.isFinite()?i.toString(10):e}}catch{return e}case"raw":default:return e}},P=({parts:e,decodedParts:r,identifier:n})=>{let t=[...r];if(e[0]==="ESDTNFTTransfer"&&e[2]&&(t[2]=a(e[2],"decimal")),n==="ESDTNFTTransfer"&&e[1]){let i=Buffer.from(String(e[1]),"base64");t[1]=a(i.toString("hex"),"decimal")}return t},E=({parts:e,decodeMethod:r,identifier:n,decodedData:t})=>{let i=e.map((s,d)=>{if(e.length>=2&&(d===0&&s.length<64||d===1&&!e[0]))return/[^a-z0-9]/gi.test(s)?a(s,r):s;let c=x(s);return c?.length&&(t.validationWarnings=Array.from(new Set([...t.validationWarnings,...c]))),a(s,r)});return r==="smart"?P({parts:e,decodedParts:i,identifier:n}):i},T=({parts:e,decodeMethod:r,identifier:n,initialDecodedParts:t})=>r==="smart"?P({parts:e,decodedParts:t,identifier:n}):t,p=({data:e,identifier:r,decodeMethod:n,delimiter:t})=>{let i=e.split("@"),o=i.map(d=>a(d,n));return T({parts:i,initialDecodedParts:o,identifier:r,decodeMethod:n}).join(t)},H=({data:e,identifier:r,decodeMethod:n,highlight:t})=>{let i={displayValue:"",validationWarnings:[],highlight:t},o=e.includes("@"),s=e.includes(`
`);if(!o&&!s)return{...i,displayValue:a(e,n),highlight:t&&a(t,n)};if(o){let d=e.split("@"),c=E({parts:d,decodeMethod:n,identifier:r,decodedData:i}),l=t?p({data:t,identifier:r,decodeMethod:n,delimiter:"@"}):null;return{...i,displayValue:c.join("@"),highlight:l}}if(s){let d=e.split(`
`),c=d.map(u=>n==="raw"?u:a(Buffer.from(u,"base64").toString("hex"),n)),l=T({parts:d,initialDecodedParts:c,identifier:r,decodeMethod:n}),S=t?p({data:t,identifier:r,decodeMethod:n,delimiter:`
`}):null;return{...i,displayValue:l.join(`
`),highlight:S}}return i},k=({data:e,highlight:r,identifier:n})=>{let t={};return Object.values(h).forEach(i=>{let o=H({data:e,identifier:n,decodeMethod:i,highlight:r});t[i]=o}),t};export{k as a};
//# sourceMappingURL=chunk-BETSOJFK.mjs.map
