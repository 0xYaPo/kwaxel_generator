{
  "version": 3,
  "sources": ["../../../../../src/utils/transactions/getTransactionsHistory/helpers/getTransactionAsset.ts"],
  "sourcesContent": ["import { ITransactionListItemAsset } from 'lib/sdkDappUi';\nimport { AssetType } from 'types/account.types';\nimport { TransactionServerStatusesEnum } from 'types/enums.types';\nimport { TransactionIconTypeEnum } from 'types/transaction-list-item.types';\nimport { isContract } from 'utils/validation/isContract';\nimport { getIsTransactionInvalidOrFailed } from './getIsTransactionInvalidOrFailed';\nimport { ITransactionAsset } from './getTransactionAssets';\nimport { getTransactionAvatar } from './getTransactionAvatar';\n\nenum NftTypeEnum {\n  NonFungibleESDT = 'NonFungibleESDT',\n  SemiFungibleESDT = 'SemiFungibleESDT'\n}\n\ninterface IGetTransactionAssetParams {\n  receiver: string;\n  sender: string;\n  receiverAssets?: AssetType;\n  senderAssets?: AssetType;\n  transactionAssets: ITransactionAsset[];\n  showDefaultState?: boolean;\n  status: TransactionServerStatusesEnum;\n}\n\nexport const getTransactionAsset = ({\n  receiver,\n  sender,\n  senderAssets,\n  receiverAssets,\n  transactionAssets,\n  showDefaultState = false,\n  status\n}: IGetTransactionAssetParams): ITransactionListItemAsset | null => {\n  const userIsReceiver = receiver === sender;\n  const isContractInteraction = userIsReceiver\n    ? isContract(sender)\n    : isContract(receiver);\n\n  const transactionAvatar = getTransactionAvatar({\n    senderAssets,\n    receiverAssets,\n    userIsReceiver\n  });\n\n  const [latestAsset] = transactionAssets ?? [];\n  const isMultipleAssets = transactionAssets.length > 1;\n  const assetIsNft = latestAsset?.type === NftTypeEnum.NonFungibleESDT;\n  const assetIsSft = latestAsset?.type === NftTypeEnum.SemiFungibleESDT;\n\n  const areMultipleAssetsSameType =\n    transactionAssets?.every(\n      (asset) => latestAsset && asset.assetTicker === latestAsset.assetTicker\n    ) ?? false;\n\n  const isTransactionFailedOrInvalid = getIsTransactionInvalidOrFailed(status);\n  const isTransactionPending = status === TransactionServerStatusesEnum.pending;\n\n  const showDefaultTransactionIcon =\n    isTransactionPending || isTransactionFailedOrInvalid;\n\n  if (showDefaultTransactionIcon && !showDefaultState) {\n    return {\n      icon: isTransactionPending ? 'faHourglass' : 'faTimes'\n    };\n  }\n\n  if (isMultipleAssets && !areMultipleAssetsSameType) {\n    return {\n      icon: 'faCoins'\n    };\n  }\n\n  if (latestAsset?.assetImage) {\n    return {\n      imageUrl: latestAsset.assetImage\n    };\n  }\n\n  if (assetIsNft || assetIsSft) {\n    return {\n      text: assetIsSft\n        ? TransactionIconTypeEnum.SFT\n        : TransactionIconTypeEnum.NFT\n    };\n  }\n\n  if (isContractInteraction) {\n    return {\n      imageUrl: transactionAvatar || undefined\n    };\n  }\n\n  return null;\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,mBAA8C;AAC9C,mCAAwC;AACxC,wBAA2B;AAC3B,6CAAgD;AAEhD,kCAAqC;AAErC,IAAK,cAAL,kBAAKA,iBAAL;AACE,EAAAA,aAAA,qBAAkB;AAClB,EAAAA,aAAA,sBAAmB;AAFhB,SAAAA;AAAA,GAAA;AAeE,MAAM,sBAAsB,CAAC;AAAA,EAClC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,mBAAmB;AAAA,EACnB;AACF,MAAoE;AAClE,QAAM,iBAAiB,aAAa;AACpC,QAAM,wBAAwB,qBAC1B,8BAAW,MAAM,QACjB,8BAAW,QAAQ;AAEvB,QAAM,wBAAoB,kDAAqB;AAAA,IAC7C;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,QAAM,CAAC,WAAW,IAAI,qBAAqB,CAAC;AAC5C,QAAM,mBAAmB,kBAAkB,SAAS;AACpD,QAAM,aAAa,aAAa,SAAS;AACzC,QAAM,aAAa,aAAa,SAAS;AAEzC,QAAM,4BACJ,mBAAmB;AAAA,IACjB,CAAC,UAAU,eAAe,MAAM,gBAAgB,YAAY;AAAA,EAC9D,KAAK;AAEP,QAAM,mCAA+B,wEAAgC,MAAM;AAC3E,QAAM,uBAAuB,WAAW,2CAA8B;AAEtE,QAAM,6BACJ,wBAAwB;AAE1B,MAAI,8BAA8B,CAAC,kBAAkB;AACnD,WAAO;AAAA,MACL,MAAM,uBAAuB,gBAAgB;AAAA,IAC/C;AAAA,EACF;AAEA,MAAI,oBAAoB,CAAC,2BAA2B;AAClD,WAAO;AAAA,MACL,MAAM;AAAA,IACR;AAAA,EACF;AAEA,MAAI,aAAa,YAAY;AAC3B,WAAO;AAAA,MACL,UAAU,YAAY;AAAA,IACxB;AAAA,EACF;AAEA,MAAI,cAAc,YAAY;AAC5B,WAAO;AAAA,MACL,MAAM,aACF,qDAAwB,MACxB,qDAAwB;AAAA,IAC9B;AAAA,EACF;AAEA,MAAI,uBAAuB;AACzB,WAAO;AAAA,MACL,UAAU,qBAAqB;AAAA,IACjC;AAAA,EACF;AAEA,SAAO;AACT;",
  "names": ["NftTypeEnum"]
}
